---
name: Add Entity Description Modal to Browse and Creator Pages
status: open
created: 2025-11-01T19:45:00Z
updated: 2025-11-01T19:58:28Z
github: https://github.com/gaucheclement/Warhammer/issues/44
depends_on: [41]
parallel: false
conflicts_with: []
---

# Task: Add Entity Description Modal to Browse and Creator Pages

## Description
Add clickable entity cards in Browse and Creator pages that open the EntityDescription modal, allowing users to view entity details including the new "Related" tab implemented in Issue #41.

## Acceptance Criteria
- [ ] Entity cards in Browse page are clickable
- [ ] Clicking entity card opens DescriptionModal with EntityDescription component
- [ ] Related tab is visible and functional in the modal
- [ ] Clicking related entities navigates to their descriptions within the modal
- [ ] Creator page skill/talent/spell selections show entity descriptions
- [ ] Modal closes with Esc key or close button
- [ ] Navigation between entities preserves history
- [ ] Manual testing completed in both Browse and Creator

## Technical Details

### Files to Modify
1. **Browse.svelte** (`src/routes/Browse.svelte`)
   - Import DescriptionModal component
   - Add state for modal (entityType, entityId, showModal)
   - Add click handler to item-card
   - Render DescriptionModal conditionally

2. **Creator.svelte** (`src/routes/Creator.svelte`)
   - Import DescriptionModal component
   - Add click handlers to skill/talent/spell selections
   - Render DescriptionModal for selected entities

### Implementation Pattern
```javascript
// Browse.svelte additions
import DescriptionModal from '../components/DescriptionModal.svelte'

let showDescriptionModal = false
let selectedEntity = { type: '', id: '' }

function handleEntityClick(entityType, entity) {
  selectedEntity = {
    type: entityType,
    id: entity.id
  }
  showDescriptionModal = true
}

function handleModalClose() {
  showDescriptionModal = false
}

function handleModalNavigate(event) {
  const { entityType, entityId } = event.detail
  selectedEntity = { type: entityType, id: entityId }
  // Modal stays open, content updates
}
```

### HTML Changes
```svelte
<!-- Make cards clickable -->
<div
  class="item-card"
  on:click={() => handleEntityClick(category, item)}
  on:keydown={(e) => e.key === 'Enter' && handleEntityClick(category, item)}
  role="button"
  tabindex="0"
>
  <!-- existing card content -->
</div>

<!-- Add modal at end of file -->
{#if showDescriptionModal}
  <DescriptionModal
    entityType={selectedEntity.type}
    entityId={selectedEntity.id}
    onClose={handleModalClose}
    onNavigate={handleModalNavigate}
  />
{/if}
```

### CSS Updates
```css
.item-card {
  cursor: pointer;
  /* existing styles */
}

.item-card:focus {
  outline: 2px solid var(--color-accent);
  outline-offset: 2px;
}
```

## Dependencies
- [ ] Issue #41 completed (EntityDescription with Related tab)
- [ ] DescriptionModal component exists and functional
- [ ] EntityDescription component with Related tab working

## Effort Estimate
- Size: S
- Hours: 2-4 hours
- Parallel: false

## Definition of Done
- [ ] Browse page entity cards clickable
- [ ] Modal opens with EntityDescription component
- [ ] Related tab visible and functional
- [ ] Navigation within modal works
- [ ] Creator page integration complete
- [ ] Keyboard navigation works (Tab, Enter, Esc)
- [ ] Manual testing completed
- [ ] No console errors
- [ ] User can test the Related tab feature from Issue #41
