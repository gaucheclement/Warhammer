---
name: Implement Navigation and History System
status: completed
created: 2025-11-01T12:45:31Z
updated: 2025-11-01T16:01:43Z
completed: 2025-11-01T17:10:00Z
github: https://github.com/gaucheclement/Warhammer/issues/38
depends_on: [37]
parallel: false
conflicts_with: []
---

# Task: Implement Navigation and History System

## Description
Create the navigation infrastructure including history stack management, breadcrumb trail, back/forward navigation, browser history API integration, and keyboard shortcuts (Alt+Left/Right). This enables users to navigate between entity descriptions and return to previous views.

## Acceptance Criteria
- [ ] Navigation state store created (`src/stores/navigation.js`)
- [ ] History stack maintains up to 50 navigation events
- [ ] `navigateToEntity(type, id)` function adds to history and updates URL hash
- [ ] `navigateBack()` function pops from history and loads previous entity
- [ ] `navigateForward()` function for redo navigation
- [ ] Browser back/forward buttons work correctly
- [ ] URL hash format: `#/entity/:type/:id`
- [ ] `NavigationBar.svelte` component with back/forward buttons
- [ ] Breadcrumb trail shows last 5 navigation steps
- [ ] Keyboard shortcuts: Alt+Left (back), Alt+Right (forward)
- [ ] History dropdown shows recent 10 items

## Technical Details
- **New files**:
  - `src/stores/navigation.js` - Svelte store for navigation state
  - `src/components/NavigationBar.svelte` - Navigation UI component
- **Store exports**: `navigationHistory`, `currentDescription`, `navigateToEntity()`, `navigateBack()`, `navigateForward()`
- **Browser integration**: `window.addEventListener('hashchange')` for URL sync
- **Keyboard**: `window.addEventListener('keydown')` for Alt+Arrow shortcuts
- **History format**: `[{type, id, label, timestamp}, ...]`

**Edge Cases**:
- Circular navigation detection (A→B→A→B)
- History persistence (session-only, clear on reload)
- Maximum history size (50 items, FIFO)

## Dependencies
- [ ] Task 37 completed (EntityDescription component)
- [ ] Router.js understanding for hash-based routing

## Effort Estimate
- Size: M
- Hours: 16 hours (2 days)
- Parallel: false (needs viewer component from Task 37)

## Definition of Done
- [ ] Navigation store implemented and tested
- [ ] NavigationBar component functional
- [ ] Browser back/forward buttons work
- [ ] Keyboard shortcuts functional
- [ ] Breadcrumb trail displays correctly
- [ ] No memory leaks after 50+ navigation events
- [ ] Edge cases handled gracefully
