---
name: Create EntityDescription Unified Viewer Component
status: completed
created: 2025-11-01T12:45:31Z
updated: 2025-11-01T16:15:35Z
completed: 2025-11-01T16:30:00Z
last_sync: 2025-11-01T16:15:35Z
github: https://github.com/gaucheclement/Warhammer/issues/37
depends_on: [36]
parallel: true
conflicts_with: []
---

# Task: Create EntityDescription Unified Viewer Component

## Description
Build the core `EntityDescription.svelte` component that renders descriptions for any entity type in any display mode. This is the foundation viewer that accepts entity type/ID props, fetches descriptions, handles cross-reference clicks, and manages tab/section state.

## Acceptance Criteria
- [ ] `EntityDescription.svelte` component created in `src/components/`
- [ ] Accepts props: `entityType`, `entityId`, `displayMode` (modal/panel/inline)
- [ ] Fetches description using appropriate generator from registry
- [ ] Renders HTML content with proper sanitization
- [ ] Tab navigation UI functional (if entity has multiple tabs)
- [ ] Cross-reference links are clickable and emit navigation events
- [ ] Loading state displayed while fetching description
- [ ] Error state displayed for missing/invalid entities
- [ ] Component is responsive on desktop and mobile

## Technical Details
- **New file**: `src/components/EntityDescription.svelte`
- **Props**: `entityType: string`, `entityId: string`, `displayMode: 'modal'|'panel'|'inline'`
- **Events**: `navigate` (when cross-reference clicked), `close` (when user closes)
- **Integration**: Use entity registry to map type â†’ generator function
- **State management**: Internal state for current tab, loading, error
- **HTML rendering**: Use `{@html}` with sanitization
- **Styling**: BEM methodology, responsive breakpoints

**Key Functions**:
- `loadDescription()` - Fetch and cache description
- `handleCrossReferenceClick(e)` - Parse data attributes and emit navigate event
- `switchTab(tabName)` - Change active tab

## Dependencies
- [ ] Task 36 completed (all generators available)
- [ ] Entity registry created (can be stubbed initially)
- [ ] Understanding of existing Modal/component patterns

## Effort Estimate
- Size: M
- Hours: 16 hours (2 days)
- Parallel: false (needs generators from Task 36)

## Definition of Done
- [ ] Component code implemented
- [ ] Basic styling applied (tabs, content area)
- [ ] Manual testing with 3+ entity types
- [ ] Cross-reference clicks emit correct events
- [ ] Loading and error states work correctly
- [ ] Code reviewed for best practices
